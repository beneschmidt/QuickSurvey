<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta charset="UTF-8">

  <title>QuickSurvey</title>

  <!-- UI5 Bootstrap with OpenUI5 -->
  <script id="sap-ui-bootstrap" type="text/javascript"
  src="https://openui5.netweaver.ondemand.com/1.30.8/resources/sap-ui-core.js"
  data-sap-ui-theme="sap_bluecrystal"
  data-sap-ui-xx-bindingSyntax="complex"
  data-sap-ui-libs="sap.m"
  data-sap-ui-resourceroots='{
    "quicksurvey": "./"
  }'>
  </script>
  <script type="text/javascript" src="qrcode.min.js"></script>
  <!-- alternative SAPUI5/OpenUI5 locations

  //OpenUI5
  src="https://openui5.netweaver.ondemand.com/resources/sap-ui-core.js"

  //use SAPUI5 from SAP HANACloud
  src="https://sapui5.hana.ondemand.com/resources/sap-ui-core.js"

  //within Eclipse with SAP UI Development Toolkit for HTML5
  src="resources/sap-ui-core.js"

  //serve locally with Node.js
  src="http://localhost:8888/sapui5/1.18.11/resources/sap-ui-core.js"
-->

<!-- Custom Styles -->
<link rel="stylesheet" type="text/css" href="css/style.css" />

<script>
jQuery.sap.require("sap.ui.core.routing.Router");  // load Router module
jQuery.sap.require("sap.ui.core.routing.Route");
jQuery.sap.require("sap.m.routing.RouteMatchedHandler");  // load RouteMatchedHandler module
sap.ui.getCore().attachInit(function() {
  sap.ui.jsview("RootView", "quicksurvey.view.App").placeAt('root');

  var oRouter = new sap.ui.core.routing.Router(
    [{
      name: "test",
      pattern: "test"
    }],{
      targetControl: "splitapp",      // targetControl refers to the id of control where all the target views are to be placed
      // this is defined in 'MainView' createcontent method
      targetAggregation: "detailPages", // targetAggregation refers to aggregation namw of targetControl. For splitApp
      // control there are two Aggregations, 'detailPages' and 'masterPages'
      viewType: "JS",   // viewType defines type of the target views
      viewPath: "quicksurvey.view",  // The view path parameter specifies a prefix that prepends the target views. In our case
      // target view detail.Categories will be takes as Views.detail.Categories. Please note that
      // view Categories is placed under folder Views/detail/
      clearTarget: true  //The clear target parameter defines a boolean that is used to specify if the aggregation
      //should be cleared before adding the view to it.
    });
    oRouter.register("router");
    oRouter.initialize();  // Initialise the Router
    oRouter.getRoute("test").attachPatternMatched(function() {
      console.log("I'm in");
      sap.ui.getCore().getEventBus().publish("nav", "to", {id : "PerformSurvey"});
    });
  });




  </script>
</head>

<body class="sapUiBody" id="root">
</body>

</html>
